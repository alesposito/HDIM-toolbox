# HDIM-toolbox

The HDIM-toolbox is a suite of matlab scripts (~6,000 lines of commented code) designed specifically to analyse this new type of data sets. After including HDIM-toolbox and its subfolders into Matlab paths, HDIM-CAL, HDIM-START and HDIM-PCA can be used to calibrate, inspect and perform multivariate analysis on HDIM datasets, respectively. HDIM-toolbox includes several scripts, but the main functions are described here below.

The definition of structures useful for analysis is provided by if_hdim_init, which returns HDIM_CAL (a structure storing all calibration parameters), HDIM_PAR (a structure storing information about imaging parameters), HDIM_VIS (a structure storing look-up tables designed for enhanced visualization of HDIM datasets and masks), and HDIM_CST (a structure storing some essential constant definitions). if_hdim_load provides a basic interface to load data, currently compatible with MAT, or Becker&Hickl SDT files. 
HDIM-START load and call if_hdim_overview which executes a series of projections to demo several functions that we provide. These include, if_hdim_anisotropy that generate an average steady-state anisotropy projection image, visualize the average spectrally resolved anisotropy spectrum and stready-state anisotropy images for each spectral bin. if_hdim_lifetime that provide an average fluorescence lifetime image and if_hdim_spec2rgb that converts a spectral image to an RGB composite either binning distinct spectral bins as detected, or weighted as per human eye sensitivity. 

HDIM-PCA executes a sequence of scripts to perform multivariate data analysis. This script includes call to if_hdim_pca_reshape and if_pca_compute that reshape the HDIM matrices for fast computation executed by if_pca_compute. Once the loadings are estimated, if_hdim_pca_apply perform the projections of the HDIM dataset onto the principal components. Notably, if_hdim_pca_reshape can perform a number of data standardizations and dimensionality reduction before feeding pixel information (treated as multi-dimensional replicates for PCA). If activated, PCA is fed not the raw HDIM photon-counts, but physical quantities such as the anisotropy values R0 and Râˆž, photon counts and phasor transforms for each spectral bin. We also provide scripts for visualization of multi-variate data analysis including if_hdim_pca_show, if_hdim_pca_rgb2dab to output pathology-like digital stains. We also provide two International Color Consortium (ICC) profiles for the RGB and CYMK projections. 

Together with HDIM-toolbox we provide data and calibration files to familiarize with the software. We also provide the code to generate the calibration file. HDIM-CAL execute a sequence of the most relevant script used to calibrate the system. if_hdim_cal_files and if_hdim_calibration_gui implement a minimal graphic user interface to select files used for calibration and to input essential parameters. Calibration of the spectral response of HDIM and of sensitivity of the two polarization-dependent channels (the G-factor) are performed by if_hdim_cal_spectral and if_hdim_cal_anisotropy, respectively. if_hdim_cal_apply, called by HDIM-START and HDIM-CAL, interpolates the HDIM dataset to transform it into absolute coordinates of polarization, microtimes (lifetimes) and wavelengths. 
